import{m as f,r as b,j as e}from"./app-McA_vTcW.js";import{L as t,I as m}from"./label-BIjeOWKT.js";import{B as u}from"./button-g9AqxOqc.js";import{C}from"./checkbox-De-WQg5P.js";import{D,a as v,b as E,c as F,d as N,e as _}from"./dialog-h7SCNmDW.js";import{I as d}from"./input-C8uTgzQt.js";import{t as I}from"./index-CK6i7lBT.js";import{C as z}from"./circle-check-DPFo6Ajp.js";import"./index-DPKL3XZS.js";import"./index-0sPityEH.js";import"./index-l7DRdzBq.js";import"./index-Dn82302e.js";import"./x-BPbzyxop.js";import"./index-C4bwZ98Y.js";function $({isOpen:g,onClose:n,fundo:r,onSuccess:x}){const{data:s,setData:i,errors:l,processing:p,reset:c,post:h}=f({nombre:"",descripcion:"",imagen:null,clear_imagen:!1,_method:"PUT"});b.useEffect(()=>{r?i({nombre:r.nombre||"",descripcion:r.descripcion||"",imagen:null,clear_imagen:!1,_method:"PUT"}):c()},[r,g,i,c]);const j=a=>{a.preventDefault(),r&&h(route("fundos.update",r.id),{forceFormData:!0,onSuccess:()=>{c(),x(),n(),I("Fundo actualizado",{description:"El fundo se ha actualizado correctamente.",icon:e.jsx(z,{}),closeButton:!0})},onError:o=>{console.error("Error al actualizar el fundo:",o)}})};return e.jsx(D,{open:g,onOpenChange:n,children:e.jsxs(v,{className:"sm:max-w-[425px]",children:[e.jsxs(E,{children:[e.jsx(F,{children:"Editar Fundo"}),e.jsx(N,{children:"Modifica los detalles del fundo existente."})]}),e.jsxs("form",{onSubmit:j,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"nombre",children:"Nombre"}),e.jsx(d,{id:"nombre",value:s.nombre||"",onChange:a=>i("nombre",a.target.value),required:!0,autoComplete:"off",placeholder:"Nombre del fundo"}),e.jsx(m,{message:l.nombre})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(d,{id:"descripcion",value:s.descripcion||"",onChange:a=>i("descripcion",a.target.value),autoComplete:"off",placeholder:"Descripción del fundo"}),e.jsx(m,{message:l.descripcion})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"imagen",children:"Imagen"}),(r==null?void 0:r.imagen)&&!s.clear_imagen&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:`/storage/${r.imagen}`,alt:"Imagen actual",className:"h-16 w-16 rounded-md object-cover"}),e.jsxs(t,{htmlFor:"clear_imagen",className:"flex cursor-pointer items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(C,{id:"clear_imagen",checked:s.clear_imagen,onCheckedChange:a=>{i(o=>({...o,clear_imagen:!!a,imagen:a?null:o.imagen}))}}),"Eliminar imagen actual"]})]}),e.jsx(d,{id:"imagen",type:"file",onChange:a=>i("imagen",a.target.files?a.target.files[0]:null),accept:"image/*",disabled:s.clear_imagen}),e.jsx(m,{message:l.imagen})]}),e.jsxs(_,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:n,children:"Cancelar"}),e.jsx(u,{type:"submit",disabled:p,children:p?"Actualizando...":"Actualizar Fundo"})]})]})]})})}export{$ as default};
