import{U as v,m as G,j as e}from"./app-McA_vTcW.js";import{B as m}from"./button-g9AqxOqc.js";import{L as o,I as n}from"./label-BIjeOWKT.js";import{P as I,S as h,a as g,b as x,c as j,d as s,R as V,e as F,f as P,g as q,h as y}from"./select-BTs55ca9.js";import{D as L,f as O,a as T,b as z,c as E,d as R}from"./dialog-h7SCNmDW.js";import{I as C}from"./input-C8uTgzQt.js";import{t as B}from"./index-CK6i7lBT.js";import{C as H}from"./chevron-down-BmumWQtY.js";import"./index-DPKL3XZS.js";import"./index-DEHRsPit.js";import"./index-0sPityEH.js";import"./index-B5Rnd2F2.js";import"./index-C4bwZ98Y.js";import"./index-l7DRdzBq.js";import"./x-BPbzyxop.js";function re({fundo:p,razas:l}){const[S,d]=v.useState(!1),[D,u]=v.useState(!1),{data:c,setData:r,errors:i,processing:f,transform:N,reset:b,post:_}=G({codigo:"",nombre:"",raza_id:"",fecha_nacimiento:new Date,genero:"macho",estado:"activo",fundo_id:p.id}),w=a=>{a.preventDefault(),a.stopPropagation(),N(t=>({...t,fecha_nacimiento:t.fecha_nacimiento.toISOString().split("T")[0]})),_(route("ganados.store",p.id),{onSuccess:()=>{B.success("Ganado creado exitosamente"),b(),u(!1),d(!1)},onError:t=>console.error(t)})};return e.jsxs(L,{open:D,onOpenChange:u,children:[e.jsx(O,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(I,{})," Crear Ganado"]})}),e.jsxs(T,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Crear Nuevo Ganado"}),e.jsx(R,{children:"Completa los campos para registrar un nuevo ganado."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(o,{htmlFor:"codigo",children:"Codigo"}),e.jsx(C,{required:!0,id:"codigo",type:"text",placeholder:"Ingrese codigo...",onChange:a=>r("codigo",a.target.value)}),e.jsx(n,{message:i.codigo})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(o,{htmlFor:"nombre",children:"Nombre"}),e.jsx(C,{required:!0,id:"nombre",type:"text",placeholder:"Ingrese nombre...",onChange:a=>r("nombre",a.target.value)}),e.jsx(n,{message:i.nombre})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(o,{htmlFor:"raza",children:"Raza"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(h,{defaultValue:l.length>0?String(l[0].id):"",required:!0,onValueChange:a=>r("raza_id",a),children:[e.jsx(g,{children:e.jsx(x,{placeholder:"Seleccionar"})}),e.jsx(j,{id:"raza",children:l.map(a=>e.jsx(s,{value:String(a.id),children:a.nombre},a.id))})]}),e.jsx(V,{})]}),e.jsx(n,{message:i.raza_id,className:"text-xs"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(o,{htmlFor:"date",className:"px-1",children:"Fecha de Nacimiento"}),e.jsxs(F,{open:S,onOpenChange:d,modal:!0,children:[e.jsx(P,{asChild:!0,children:e.jsxs(m,{variant:"outline",id:"date",className:"justify-between font-normal",children:[c.fecha_nacimiento?c.fecha_nacimiento.toLocaleDateString():"Seleccionar fecha",e.jsx(H,{})]})}),e.jsx(q,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(y,{mode:"single",selected:c.fecha_nacimiento,onSelect:a=>{r("fecha_nacimiento",a?new Date(a):new Date),d(!1)},disabled:a=>a>new Date})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(o,{htmlFor:"genero",children:"Genero"}),e.jsxs(h,{defaultValue:"macho",required:!0,onValueChange:a=>r("genero",a.toLocaleLowerCase()),children:[e.jsx(g,{children:e.jsx(x,{placeholder:"Seleccionar"})}),e.jsxs(j,{id:"genero",children:[e.jsx(s,{value:"macho",children:"Macho"}),e.jsx(s,{value:"hembra",children:"Hembra"})]})]}),e.jsx(n,{message:i.raza_id,className:"text-xs"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(o,{htmlFor:"estado",children:"Estado"}),e.jsxs(h,{defaultValue:"activo",required:!0,onValueChange:a=>r("estado",a),children:[e.jsx(g,{children:e.jsx(x,{placeholder:"Seleccionar"})}),e.jsxs(j,{id:"estado",children:[e.jsx(s,{value:"activo",children:"Activo"}),e.jsx(s,{value:"produccion",children:"Producci√≥n"}),e.jsx(s,{value:"vendido",children:"Vendido"}),e.jsx(s,{value:"muerto",children:"Muerto"})]})]}),e.jsx(n,{message:i.estado,className:"text-xs"})]})]}),e.jsx(m,{type:"submit",disabled:f,children:f?"Guardando...":"Guardar Ganado"})]})]})]})}export{re as default};
